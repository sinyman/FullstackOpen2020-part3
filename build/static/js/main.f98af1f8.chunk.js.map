{"version":3,"sources":["components/People.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/numberService.js","index.js"],"names":["People","people","deleteButtonClick","map","person","key","id","name","number","type","onClick","PersonForm","savePerson","newName","newNumber","handleTextChange","handleNumberChange","onSubmit","value","onChange","Filter","searchPeople","newSearch","handleSearchChange","Notification","message","split","className","baseUrl","axios","get","then","response","data","newObject","post","idToBeDeleted","deleteURL","delete","put","ReactDOM","render","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","showAll","setShowAll","notificationMessage","setNotificationMessage","updatePeople","personObject","persID","find","window","confirm","numberService","personList","filter","concat","sort","a","b","catch","error","setTimeout","useEffect","initialData","event","preventDefault","target","persName","toLowerCase","includes","createdPerson","document","getElementById"],"mappings":"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","file":"static/js/main.f98af1f8.chunk.js","sourcesContent":["import React from 'react'\n\nconst People = ({people, deleteButtonClick}) => {\n  const listPeople = () => {\n    return (\n      people.map(person =>\n        <div key={person.id}>\n          <li>\n            {person.name} {person.number}\n            <button id={person.id} type=\"submit\" onClick={deleteButtonClick} >Delete</button>\n          </li>\n        </div>\n      )\n    )\n  }\n\n  return (\n    <div>\n      <h3>Numbers</h3>\n      <ul>\n        {listPeople()}\n      </ul>\n    </div>\n  )\n}\n\nexport default People\n","import React from 'react'\n\nconst PersonForm = ({ savePerson, newName, newNumber, handleTextChange, handleNumberChange }) => {\n\n  return (\n    <div>\n      <h3>Add new number</h3>\n      <form onSubmit={savePerson}>\n        <div>\n          name: <input value={newName} onChange={handleTextChange} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Filter = ({ searchPeople, newSearch, handleSearchChange }) => {\n\n  return (\n    <div>\n      <p>filter shown with:</p>\n      <form onSubmit={searchPeople}>\n        <input value={newSearch} onChange={handleSearchChange} />\n      </form>\n    </div>\n  )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  if(message.split(\":\")[0] === \"Error\") {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst deletePerson = idToBeDeleted => {\n  const deleteURL = baseUrl+'/'+idToBeDeleted\n  const request = axios.delete(deleteURL)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst update = (id, newObject) => {\n  const req = axios.put(`${baseUrl}/${id}`, newObject)\n  return req.then(response => {\n    return response.data\n  })\n}\n\n\nexport default { getAll, create, deletePerson, update }\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport People from './components/People'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport numberService from './services/numberService'\n\nimport './styles.css'\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n\n  // State variables\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ showAll, setShowAll ] = useState(true)\n  const [ notificationMessage, setNotificationMessage ] = useState(null)\n\n// Form handling\n  const handleTextChange = (event) => { setNewName(event.target.value) }\n  const handleNumberChange = (event) => { setNewNumber(event.target.value) }\n  const handleSearchChange = (event) => { setNewSearch(event.target.value) }\n\n  const personValid = (name) => {\n    const names = persons.map(person => person.name.toLowerCase());\n    return !names.includes(name.toLowerCase())\n  }\n\n  const savePerson = (event) => {\n    event.preventDefault()\n    const persName= newName\n\n    if(personValid(newName)) {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n\n      numberService\n        .create(personObject)\n        .then(createdPerson => {\n          setPersons(persons.concat(createdPerson))\n          setNotificationMessage(`Success: '${persName}' was successfully added!`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n\n        })\n        .catch(error => {\n          setNotificationMessage(\"Error: \" + error.response.data.error)\n        })\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n      updatePeople(personObject)\n    }\n\n    setNewName('')\n    setNewNumber('')\n    setNewSearch('')\n    setShowAll(true)\n  }\n\n  const searchPeople = (event) => {\n    event.preventDefault()\n    setShowAll(false)\n\n  }\n\n  const getPeopleToShow = () => {\n\n    const peopleToShow = showAll\n    ? persons\n    : persons.filter(person => person.name.toLowerCase()\n      .includes(newSearch.toLowerCase()))\n\n    return peopleToShow\n  }\n\n  const deletePeople = event => {\n    event.preventDefault()\n    const idToBeDeleted = event.target.id\n    const name = persons.find(person => person.id == idToBeDeleted).name\n    if(window.confirm(`You sure you want to delete '${name}'?`)) {\n      const personList = persons.filter(person => person.id !== idToBeDeleted)\n      numberService\n        .deletePerson(idToBeDeleted)\n        .then(response => {\n          setPersons(personList)\n          setNotificationMessage(`Success: '${name}' was successfully deleted!`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          setNotificationMessage(`Error: '${name}' could not be deleted.\n            The number may have already been deleted from database, try refreshing\n            the page!`)\n        })\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000)\n    }\n  }\n\n  const updatePeople = personObject => {\n    const persID = persons.find(person => person.name === personObject.name).id\n\n    if(window.confirm(`${personObject.name} is already in phonebook, replace the old number with new one?`)) {\n      numberService\n        .update(persID, personObject)\n        .then(response => {\n          const personList = persons.filter(person => person.id !== persID)\n\n          // Helper sort function for getting right order in list(by item id)\n          const sortByID = (a, b) => {\n            if(a.id > b.id) return 1\n            if(a.id < b.id) return -1\n            return 0\n          }\n          setPersons(personList.concat(response).sort(sortByID))\n        })\n        .catch(error => {\n          setNotificationMessage(\"Error: \" + error.response.data.error)\n        })\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 10000)\n    }\n  }\n\n  useEffect(() => {\n  numberService\n    .getAll()\n    .then(initialData => {\n      setPersons(initialData)\n    })\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <Filter searchPeople={searchPeople}\n        newSearch={newSearch}\n        handleSearchChange={handleSearchChange}\n      />\n\n      <PersonForm savePerson={savePerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleTextChange={handleTextChange}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <People people={getPeopleToShow()} deleteButtonClick={deletePeople} />\n    </div>\n  )\n}\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}